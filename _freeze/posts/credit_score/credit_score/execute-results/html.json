{
  "hash": "8cacf02767e051158d8c08c97752d8a0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Credit Score\"\nimage: \"credit_score.jpeg\"\ndescription: \"NLP\"\nauthor: \"Simone Brazzi\"\ndate: \"2024-10-26\"\ndraft: true\ncategories:\n  - code\n  - ML\n  - Python, R\ntoc: true\ntoc-title: \"Table of Contents\"\n# other-links:\n#   - icon: file-pdf\n#     text: LDA Paper\n#     href: https://www.jmlr.org/papers/volume3/blei03a/blei03a.pdf\ntoc-depth: 3\nnumber-sections: true\nnumber-depth: 3\nembed-resources: true\nanchor-sections: true\nsmooth-scroll: true\nhighlight-style: monokai\ncode-line-numbers: true\ncode-copy: true\ncode-link: true\ncode-fold: true\n\nexecute:\n  warnings: false\n  freeze: auto\n\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n# Introduction\n\nCreate a model capable of estimating the creditworthiness of customers, in order to help the dedicated team understand whether or not to accept a credit card application.\n\n## Features\n\n-   ID: customer identification number\n-   CODE_GENDER: gender of the customer\n-   FLAGOWNCAR: indicator of car ownership\n-   FLAGOWNREALTY: indicator of house ownership\n-   CNT_CHILDREN: number of children\n-   AMTINCOMETOTAL: annual income\n-   NAMEINCOMETYPE: type of income\n-   NAMEEDUCATIONTYPE: level of education\n-   NAMEFAMILYSTATUS: marital status\n-   NAMEHOUSINGTYPE: type of dwelling\n-   DAYS_BIRTH: number of days since birth\n-   DAYS_EMPLOYED: number of days since employment (if positive, indicates the number of days since being unemployed)\n-   FLAG_MOBIL: indicator for the presence of a mobile phone number\n-   FLAGWORKPHONE: indicator of the presence of a work phone number\n-   FLAG_PHONE: indicator of the presence of a telephone number\n-   FLAG_EMAIL: indicator for the presence of an email address\n-   OCCUPATION_TYPE: type of occupation\n-   CNTFAMMEMBERS: number of family members\n-   TARGET: variable which is worth 1 if the customer has a high creditworthiness (constant payment of installments), 0 otherwise.\n\nIf a customer is denied a credit card, the team must be able to give a reason. This means that your model must provide indications that are easy to interpret.\n\nIt is a binary classification which needs a good explainability.\n\n# Import\n\n## R\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse, verbose = FALSE)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(reticulate)\nlibrary(gt)\nlibrary(scales)\n```\n:::\n\n\n\n## Python\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport pickle\n\nfrom datetime import date\nfrom dateutil.relativedelta import relativedelta\nfrom sklearn.model_selection import train_test_split, GridSearchCV\nfrom sklearn.compose import ColumnTransformer\nfrom sklearn.preprocessing import OneHotEncoder, StandardScaler, MinMaxScaler, LabelBinarizer\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.tree import DecisionTreeClassifier\nfrom xgboost import XGBClassifier\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import classification_report\n```\n:::\n\n\n\n## Config class\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nclass Config():\n  \n  def __init__(self):\n    \"\"\"\n    Initialization calss.\n    \"\"\"\n    \n    self.path=\"/Users/simonebrazzi/R/blog/posts/credit_score/\"\n    self.file=\"/Users/simonebrazzi/R/blog/posts/credit_score/credit_scoring.csv\"\n    self.random_state=42\n    self.col_bi = ['code_gender', 'flag_own_car', 'flag_own_realty', 'flag_mobil', 'flag_work_phone', 'flag_phone', 'flag_email']\n    self.col_ohe = [\"name_income_type\", \"name_education_type\", \"name_family_status\", \"name_housing_type\", \"occupation_type\"]\n    self.col_ss = ['cnt_children', 'amt_income_total', 'cnt_fam_members']\n    self.features = self.col_bi + self.col_ohe + self.col_ss\n\n  \nconfig = Config()\n```\n:::\n\n\n\n# Dataset\n\nNow we can import the dataset. Having all columns UPPERCASE, I will set all of them as lowercase. Also, I will assign target as the y variable and all the remaining columns as x or features.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndf = pd.read_csv(config.file)\ndf.columns = df.columns.str.lower()\ndf[\"id\"] = df.id.astype(int)\n```\n:::\n\n\n\n# EDA\n\n## Target\n\nIt is always important to perform an EDA. In this case I am expecting to have less cases of high creditworthiness than low leveraging personal knowledge. Xonsidering it is a **binary classification**, it is important to be sure if data are balanced to make a better model selection.\n\n\n\n::: {.cell}\n\n:::\n\n\n\nThe variable:\n\n-   0 has 308\\,705.\n-   1 has 29\\,722.\n\n\n\n::: {#tbl-eda .cell tbl-cap='Absolute and relative frequencies'}\n\n```{.r .cell-code}\ndf <- py$df\n\ndf_g <- df %>% \n  rename(label = target) %>% \n  mutate(label = as.factor(label)) %>% \n  summarize(\n    freq_abs = n(),\n    freq_rel = n() / nrow(df),\n    .by = label\n  )\ndf_g %>% \n  gt() %>% \n  fmt_auto() %>% \n  cols_width(\n    label ~ pct(20),\n    freq_abs ~ pct(35),\n    freq_rel ~ pct(35)\n    ) %>% \n  cols_align(\n    align = \"center\",\n    columns = c(freq_abs, freq_rel)\n  ) %>% \n  tab_header(\n    title = \"Label frequency\",\n    subtitle = \"Absolute and relative frequencies\"\n  ) %>% \n  cols_label(\n    label = \"Label\",\n    freq_abs = \"Absolute frequency\",\n    freq_rel = \"Relative frequency\"\n  ) %>% \n  tab_options(\n    table.width = pct(100)\n    )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"atsqgbpbzr\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#atsqgbpbzr table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#atsqgbpbzr thead, #atsqgbpbzr tbody, #atsqgbpbzr tfoot, #atsqgbpbzr tr, #atsqgbpbzr td, #atsqgbpbzr th {\n  border-style: none;\n}\n\n#atsqgbpbzr p {\n  margin: 0;\n  padding: 0;\n}\n\n#atsqgbpbzr .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#atsqgbpbzr .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#atsqgbpbzr .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#atsqgbpbzr .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#atsqgbpbzr .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#atsqgbpbzr .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#atsqgbpbzr .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#atsqgbpbzr .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#atsqgbpbzr .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#atsqgbpbzr .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#atsqgbpbzr .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#atsqgbpbzr .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#atsqgbpbzr .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#atsqgbpbzr .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#atsqgbpbzr .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#atsqgbpbzr .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#atsqgbpbzr .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#atsqgbpbzr .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#atsqgbpbzr .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#atsqgbpbzr .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#atsqgbpbzr .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#atsqgbpbzr .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#atsqgbpbzr .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#atsqgbpbzr .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#atsqgbpbzr .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#atsqgbpbzr .gt_left {\n  text-align: left;\n}\n\n#atsqgbpbzr .gt_center {\n  text-align: center;\n}\n\n#atsqgbpbzr .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#atsqgbpbzr .gt_font_normal {\n  font-weight: normal;\n}\n\n#atsqgbpbzr .gt_font_bold {\n  font-weight: bold;\n}\n\n#atsqgbpbzr .gt_font_italic {\n  font-style: italic;\n}\n\n#atsqgbpbzr .gt_super {\n  font-size: 65%;\n}\n\n#atsqgbpbzr .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#atsqgbpbzr .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#atsqgbpbzr .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#atsqgbpbzr .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#atsqgbpbzr .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#atsqgbpbzr .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#atsqgbpbzr .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#atsqgbpbzr .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#atsqgbpbzr div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" style=\"table-layout:fixed;width:100%;\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <colgroup>\n    <col style=\"width:20%;\"/>\n    <col style=\"width:35%;\"/>\n    <col style=\"width:35%;\"/>\n  </colgroup>\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\" style>Label frequency</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Absolute and relative frequencies</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\">Label</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq_abs\">Absolute frequency</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq_rel\">Relative frequency</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_center\">0</td>\n<td headers=\"freq_abs\" class=\"gt_row gt_center\">308,705 </td>\n<td headers=\"freq_rel\" class=\"gt_row gt_center\">0.912</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_center\">1</td>\n<td headers=\"freq_abs\" class=\"gt_row gt_center\"> 29,722 </td>\n<td headers=\"freq_rel\" class=\"gt_row gt_center\">0.088</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- ggplot(df_g) +\n  geom_bar(aes(x = label, y = freq_abs, fill = label), stat = \"identity\") +\n  ggtitle(\"Absolute frequency barchart\") +\n  xlab(\"Label\") +\n  ylab(\"Absolute frequency\") +\n  labs(fill = \"Label\") +\n  scale_y_continuous(breaks = scales::breaks_pretty(n = 5)) +\n  theme_minimal()\nggplotly(g)\n```\n\n::: {#fig-barchart .cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-137a58abb77a2b8cc68a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-137a58abb77a2b8cc68a\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":0.89999999999999991,\"base\":0,\"x\":[1],\"y\":[308705],\"text\":\"label: 0<br />freq_abs: 308705<br />label: 0\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"0\",\"legendgroup\":\"0\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":0.90000000000000013,\"base\":0,\"x\":[2],\"y\":[29722],\"text\":\"label: 1<br />freq_abs:  29722<br />label: 1\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"1\",\"legendgroup\":\"1\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":60.639269406392714},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Absolute frequency barchart\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,2.6000000000000001],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"1\"],\"tickvals\":[1,2],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"1\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Label\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-15435.25,324140.25],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"50000\",\"100000\",\"150000\",\"200000\",\"250000\",\"300000\"],\"tickvals\":[0,50000,100000,150000,200000,250000,300000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"50000\",\"100000\",\"150000\",\"200000\",\"250000\",\"300000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Absolute frequency\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Label\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"12dd46f157beb\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"}},\"cur_data\":\"12dd46f157beb\",\"visdat\":{\"12dd46f157beb\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nAbsolute frequency barchart\n:::\n:::\n\n\n\nRemember: **0**. stands for **low creditworthiness**, **1** for **high**. Our dataset is strongly unbalanced towards the 0 label. So, my first idea was right.\n\n## Features\n\nLets check the **NA** values in each feature.\n\n\n\n::: {#tbl-na .cell tbl-cap='Number of NA values for each feature'}\n\n```{.r .cell-code}\ndf_na <- df %>%\n  summarize(across(everything(), ~ sum(is.na(.)))) %>%\n  pivot_longer(\n    cols = everything(),\n    names_to = \"columns\",\n    values_to = \"value\"\n  )\ndf_na %>% \n  gt() %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    columns = \"Columns\",\n    value = \"NA Value\"\n  ) %>% \n  tab_header(\n    title = \"NA values\",\n    subtitle = \"Number of NA value for each feature\"\n  ) %>% \n  fmt_number(\n    columns = c(\"value\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"tylxlmgklz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#tylxlmgklz table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#tylxlmgklz thead, #tylxlmgklz tbody, #tylxlmgklz tfoot, #tylxlmgklz tr, #tylxlmgklz td, #tylxlmgklz th {\n  border-style: none;\n}\n\n#tylxlmgklz p {\n  margin: 0;\n  padding: 0;\n}\n\n#tylxlmgklz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#tylxlmgklz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#tylxlmgklz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#tylxlmgklz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#tylxlmgklz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#tylxlmgklz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#tylxlmgklz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#tylxlmgklz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#tylxlmgklz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#tylxlmgklz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#tylxlmgklz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#tylxlmgklz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#tylxlmgklz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#tylxlmgklz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#tylxlmgklz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tylxlmgklz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#tylxlmgklz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#tylxlmgklz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#tylxlmgklz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tylxlmgklz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#tylxlmgklz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tylxlmgklz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#tylxlmgklz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tylxlmgklz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tylxlmgklz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tylxlmgklz .gt_left {\n  text-align: left;\n}\n\n#tylxlmgklz .gt_center {\n  text-align: center;\n}\n\n#tylxlmgklz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#tylxlmgklz .gt_font_normal {\n  font-weight: normal;\n}\n\n#tylxlmgklz .gt_font_bold {\n  font-weight: bold;\n}\n\n#tylxlmgklz .gt_font_italic {\n  font-style: italic;\n}\n\n#tylxlmgklz .gt_super {\n  font-size: 65%;\n}\n\n#tylxlmgklz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#tylxlmgklz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#tylxlmgklz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#tylxlmgklz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#tylxlmgklz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#tylxlmgklz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#tylxlmgklz .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#tylxlmgklz .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#tylxlmgklz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal\" style>NA values</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Number of NA value for each feature</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"columns\">Columns</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"value\">NA Value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">id</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">code_gender</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_own_car</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_own_realty</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">cnt_children</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">amt_income_total</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">name_income_type</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">name_education_type</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">name_family_status</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">name_housing_type</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">days_birth</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">days_employed</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_mobil</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_work_phone</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_phone</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">flag_email</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">occupation_type</td>\n<td headers=\"value\" class=\"gt_row gt_center\">103,342</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">cnt_fam_members</td>\n<td headers=\"value\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"columns\" class=\"gt_row gt_center\">target</td>\n<td headers=\"value\" class=\"gt_row gt_center\">0</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nThere are 2 interesting things to notice:\n\n#### The column `occupation_type` has lots of NA value. How much in proportion to the total? Should we drop the NAs or keep them?\n\n\n\n::: {#tbl-occupation-type .cell tbl-cap='NA frequency for occupation_type'}\n\n```{.r .cell-code}\ndf %>%\n  summarize(\n    freq_abs = sum(is.na(occupation_type)),\n    freq_rel = sum(is.na(occupation_type)) / nrow(df)\n    ) %>% \n  gt() %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    freq_abs = \"Absolute Frequency\",\n    freq_rel = \"Relative Frequency\"\n  ) %>% \n  tab_header(\n    title = \"Absolute and Relative Frequency\",\n    subtitle = \"NA frequency for occupation_type\"\n  ) %>% \n  fmt_number(\n    columns = c(\"freq_abs\", \"freq_rel\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"unjmgsudip\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#unjmgsudip table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#unjmgsudip thead, #unjmgsudip tbody, #unjmgsudip tfoot, #unjmgsudip tr, #unjmgsudip td, #unjmgsudip th {\n  border-style: none;\n}\n\n#unjmgsudip p {\n  margin: 0;\n  padding: 0;\n}\n\n#unjmgsudip .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#unjmgsudip .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#unjmgsudip .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#unjmgsudip .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#unjmgsudip .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#unjmgsudip .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#unjmgsudip .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#unjmgsudip .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#unjmgsudip .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#unjmgsudip .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#unjmgsudip .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#unjmgsudip .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#unjmgsudip .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#unjmgsudip .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#unjmgsudip .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unjmgsudip .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#unjmgsudip .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#unjmgsudip .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#unjmgsudip .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unjmgsudip .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#unjmgsudip .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unjmgsudip .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#unjmgsudip .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unjmgsudip .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#unjmgsudip .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unjmgsudip .gt_left {\n  text-align: left;\n}\n\n#unjmgsudip .gt_center {\n  text-align: center;\n}\n\n#unjmgsudip .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#unjmgsudip .gt_font_normal {\n  font-weight: normal;\n}\n\n#unjmgsudip .gt_font_bold {\n  font-weight: bold;\n}\n\n#unjmgsudip .gt_font_italic {\n  font-style: italic;\n}\n\n#unjmgsudip .gt_super {\n  font-size: 65%;\n}\n\n#unjmgsudip .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#unjmgsudip .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#unjmgsudip .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#unjmgsudip .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#unjmgsudip .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#unjmgsudip .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#unjmgsudip .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#unjmgsudip .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#unjmgsudip div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal\" style>Absolute and Relative Frequency</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>NA frequency for occupation_type</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq_abs\">Absolute Frequency</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq_rel\">Relative Frequency</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"freq_abs\" class=\"gt_row gt_center\">103,342</td>\n<td headers=\"freq_rel\" class=\"gt_row gt_center\">0.31</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n30\\.54% of occupation_type are NA. This could be a big concern: how to handle it? Drop it means losing lots of data, keeping it could lead to impute wrong data, which could be worse.\n\nLets check how the occupation_type labels frequency.\n\n\n\n::: {#tbl-occupation-type-freq-tbl .cell tbl-cap='Occupation type label frequency'}\n\n```{.r .cell-code}\ndf %>% \n  summarise(\n    n = n(),\n    .by = occupation_type\n  ) %>% \n  arrange(desc(n)) %>% \n  gt() %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    occupation_type = \"Occupation Type\",\n    n = \"Frequency\"\n  ) %>% \n  tab_header(\n    title = \"Occupation Type Label Frequency\"\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ufegwdmvyt\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ufegwdmvyt table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ufegwdmvyt thead, #ufegwdmvyt tbody, #ufegwdmvyt tfoot, #ufegwdmvyt tr, #ufegwdmvyt td, #ufegwdmvyt th {\n  border-style: none;\n}\n\n#ufegwdmvyt p {\n  margin: 0;\n  padding: 0;\n}\n\n#ufegwdmvyt .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ufegwdmvyt .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ufegwdmvyt .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ufegwdmvyt .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ufegwdmvyt .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ufegwdmvyt .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ufegwdmvyt .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ufegwdmvyt .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ufegwdmvyt .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ufegwdmvyt .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ufegwdmvyt .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ufegwdmvyt .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ufegwdmvyt .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ufegwdmvyt .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ufegwdmvyt .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ufegwdmvyt .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ufegwdmvyt .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ufegwdmvyt .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ufegwdmvyt .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ufegwdmvyt .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ufegwdmvyt .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ufegwdmvyt .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ufegwdmvyt .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ufegwdmvyt .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ufegwdmvyt .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ufegwdmvyt .gt_left {\n  text-align: left;\n}\n\n#ufegwdmvyt .gt_center {\n  text-align: center;\n}\n\n#ufegwdmvyt .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ufegwdmvyt .gt_font_normal {\n  font-weight: normal;\n}\n\n#ufegwdmvyt .gt_font_bold {\n  font-weight: bold;\n}\n\n#ufegwdmvyt .gt_font_italic {\n  font-style: italic;\n}\n\n#ufegwdmvyt .gt_super {\n  font-size: 65%;\n}\n\n#ufegwdmvyt .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ufegwdmvyt .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ufegwdmvyt .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ufegwdmvyt .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ufegwdmvyt .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ufegwdmvyt .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ufegwdmvyt .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ufegwdmvyt .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ufegwdmvyt div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Occupation Type Label Frequency</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"occupation_type\">Occupation Type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Frequency</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">NA</td>\n<td headers=\"n\" class=\"gt_row gt_center\">103,342</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Laborers</td>\n<td headers=\"n\" class=\"gt_row gt_center\">60,146</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Core staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">33,527</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Sales staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">31,652</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Managers</td>\n<td headers=\"n\" class=\"gt_row gt_center\">27,384</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Drivers</td>\n<td headers=\"n\" class=\"gt_row gt_center\">20,020</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">High skill tech staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">13,399</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Accountants</td>\n<td headers=\"n\" class=\"gt_row gt_center\">12,281</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Medicine staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">10,438</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Cooking staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">6,248</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Security staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">6,218</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Cleaning staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">4,594</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Private service staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">2,787</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Low-skill Laborers</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1,714</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Secretaries</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1,577</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Waiters/barmen staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1,245</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">Realty agents</td>\n<td headers=\"n\" class=\"gt_row gt_center\">852</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">HR staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">567</td></tr>\n    <tr><td headers=\"occupation_type\" class=\"gt_row gt_center\">IT staff</td>\n<td headers=\"n\" class=\"gt_row gt_center\">436</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nSo, here is the situation: we could impute the NA respecting the proportion of the other labels in the dataset or we can drop the NA values. I want to drop the NA. Even if we are losing a third of the data, we are not making assumption about the rest. Also, we still have 235085, which are plenty enough.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_occ_type <- df %>% \n  filter(!is.na(occupation_type)) %>% \n  summarise(\n    n = n(),\n    .by = occupation_type\n  ) %>% \n  arrange(desc(n))\n\n# to extend the palette to the number of labels\nextended_palette <- colorRampPalette(RColorBrewer::brewer.pal(9, \"Purples\"))(df_occ_type %>% nrow())\n\ng <- ggplot(df_occ_type) +\n  geom_col(aes(x = n, y = reorder(occupation_type, n), fill = reorder(occupation_type, n))) +\n  theme_minimal() +\n  labs(\n    x = \"Count\",\n    y = \"Labels\",\n    title = \"Occupation Type Label Frequency\"\n  ) +\n  scale_fill_manual(values = extended_palette)\n\nggplotly(g)\n```\n\n::: {#fig-barplot-occ-type-freq .cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-2b7ad91ed46d09de0c86\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2b7ad91ed46d09de0c86\">{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":436,\"base\":0.55000000000000004,\"x\":[218],\"y\":[0.89999999999999991],\"text\":\"n:   436<br />reorder(occupation_type, n): IT staff<br />reorder(occupation_type, n): IT staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(252,251,253,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"IT staff\",\"legendgroup\":\"IT staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":567,\"base\":1.55,\"x\":[283.5],\"y\":[0.90000000000000013],\"text\":\"n:   567<br />reorder(occupation_type, n): HR staff<br />reorder(occupation_type, n): HR staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(245,244,249,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"HR staff\",\"legendgroup\":\"HR staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":852,\"base\":2.5499999999999998,\"x\":[426],\"y\":[0.90000000000000036],\"text\":\"n:   852<br />reorder(occupation_type, n): Realty agents<br />reorder(occupation_type, n): Realty agents\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(239,237,245,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Realty agents\",\"legendgroup\":\"Realty agents\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":1245,\"base\":3.5499999999999998,\"x\":[622.5],\"y\":[0.90000000000000036],\"text\":\"n:  1245<br />reorder(occupation_type, n): Waiters/barmen staff<br />reorder(occupation_type, n): Waiters/barmen staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(230,229,240,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Waiters/barmen staff\",\"legendgroup\":\"Waiters/barmen staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":1577,\"base\":4.5499999999999998,\"x\":[788.5],\"y\":[0.90000000000000036],\"text\":\"n:  1577<br />reorder(occupation_type, n): Secretaries<br />reorder(occupation_type, n): Secretaries\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(220,220,236,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Secretaries\",\"legendgroup\":\"Secretaries\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":1714,\"base\":5.5499999999999998,\"x\":[857],\"y\":[0.90000000000000036],\"text\":\"n:  1714<br />reorder(occupation_type, n): Low-skill Laborers<br />reorder(occupation_type, n): Low-skill Laborers\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(207,207,229,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Low-skill Laborers\",\"legendgroup\":\"Low-skill Laborers\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":2787,\"base\":6.5499999999999998,\"x\":[1393.5],\"y\":[0.90000000000000036],\"text\":\"n:  2787<br />reorder(occupation_type, n): Private service staff<br />reorder(occupation_type, n): Private service staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(193,194,222,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Private service staff\",\"legendgroup\":\"Private service staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":4594,\"base\":7.5499999999999998,\"x\":[2297],\"y\":[0.89999999999999947],\"text\":\"n:  4594<br />reorder(occupation_type, n): Cleaning staff<br />reorder(occupation_type, n): Cleaning staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(179,178,214,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Cleaning staff\",\"legendgroup\":\"Cleaning staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":6218,\"base\":8.5500000000000007,\"x\":[3109],\"y\":[0.89999999999999858],\"text\":\"n:  6218<br />reorder(occupation_type, n): Security staff<br />reorder(occupation_type, n): Security staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(165,162,204,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Security staff\",\"legendgroup\":\"Security staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":6248,\"base\":9.5500000000000007,\"x\":[3124],\"y\":[0.89999999999999858],\"text\":\"n:  6248<br />reorder(occupation_type, n): Cooking staff<br />reorder(occupation_type, n): Cooking staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(150,147,196,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Cooking staff\",\"legendgroup\":\"Cooking staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":10438,\"base\":10.550000000000001,\"x\":[5219],\"y\":[0.89999999999999858],\"text\":\"n: 10438<br />reorder(occupation_type, n): Medicine staff<br />reorder(occupation_type, n): Medicine staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(136,133,190,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Medicine staff\",\"legendgroup\":\"Medicine staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":12281,\"base\":11.550000000000001,\"x\":[6140.5],\"y\":[0.89999999999999858],\"text\":\"n: 12281<br />reorder(occupation_type, n): Accountants<br />reorder(occupation_type, n): Accountants\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(124,117,181,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Accountants\",\"legendgroup\":\"Accountants\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":13399,\"base\":12.550000000000001,\"x\":[6699.5],\"y\":[0.89999999999999858],\"text\":\"n: 13399<br />reorder(occupation_type, n): High skill tech staff<br />reorder(occupation_type, n): High skill tech staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(113,96,171,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"High skill tech staff\",\"legendgroup\":\"High skill tech staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":20020,\"base\":13.550000000000001,\"x\":[10010],\"y\":[0.89999999999999858],\"text\":\"n: 20020<br />reorder(occupation_type, n): Drivers<br />reorder(occupation_type, n): Drivers\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(103,76,160,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Drivers\",\"legendgroup\":\"Drivers\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":27384,\"base\":14.550000000000001,\"x\":[13692],\"y\":[0.89999999999999858],\"text\":\"n: 27384<br />reorder(occupation_type, n): Managers<br />reorder(occupation_type, n): Managers\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(93,56,151,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Managers\",\"legendgroup\":\"Managers\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":31652,\"base\":15.550000000000001,\"x\":[15826],\"y\":[0.89999999999999858],\"text\":\"n: 31652<br />reorder(occupation_type, n): Sales staff<br />reorder(occupation_type, n): Sales staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(82,36,141,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Sales staff\",\"legendgroup\":\"Sales staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":33527,\"base\":16.550000000000001,\"x\":[16763.5],\"y\":[0.89999999999999858],\"text\":\"n: 33527<br />reorder(occupation_type, n): Core staff<br />reorder(occupation_type, n): Core staff\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(72,18,133,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Core staff\",\"legendgroup\":\"Core staff\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"orientation\":\"v\",\"width\":60146,\"base\":17.550000000000001,\"x\":[30073],\"y\":[0.89999999999999858],\"text\":\"n: 60146<br />reorder(occupation_type, n): Laborers<br />reorder(occupation_type, n): Laborers\",\"type\":\"bar\",\"textposition\":\"none\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(63,0,125,1)\",\"line\":{\"width\":1.8897637795275593,\"color\":\"transparent\"}},\"name\":\"Laborers\",\"legendgroup\":\"Laborers\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":148.31050228310505},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Occupation Type Label Frequency\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-3007.3000000000002,63153.300000000003],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20000\",\"40000\",\"60000\"],\"tickvals\":[0,20000,40000,60000],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20000\",\"40000\",\"60000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Count\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,18.600000000000001],\"tickmode\":\"array\",\"ticktext\":[\"IT staff\",\"HR staff\",\"Realty agents\",\"Waiters/barmen staff\",\"Secretaries\",\"Low-skill Laborers\",\"Private service staff\",\"Cleaning staff\",\"Security staff\",\"Cooking staff\",\"Medicine staff\",\"Accountants\",\"High skill tech staff\",\"Drivers\",\"Managers\",\"Sales staff\",\"Core staff\",\"Laborers\"],\"tickvals\":[1,2,3,4,5,5.9999999999999991,7,8,9,10,11,12,13,14,15,16,17,18],\"categoryorder\":\"array\",\"categoryarray\":[\"IT staff\",\"HR staff\",\"Realty agents\",\"Waiters/barmen staff\",\"Secretaries\",\"Low-skill Laborers\",\"Private service staff\",\"Cleaning staff\",\"Security staff\",\"Cooking staff\",\"Medicine staff\",\"Accountants\",\"High skill tech staff\",\"Drivers\",\"Managers\",\"Sales staff\",\"Core staff\",\"Laborers\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Labels\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"reorder(occupation_type, n)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"12dd4220f117\":{\"x\":{},\"y\":{},\"fill\":{},\"type\":\"bar\"}},\"cur_data\":\"12dd4220f117\",\"visdat\":{\"12dd4220f117\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nBarplot Occupation Type Label frequency\n:::\n:::\n\n\n\n#### There is a NA value in at least all the columns: is it possible it is the same observation?\n\nFirst of all, we can create a list of the columns name which have only 1 NA, using the `df_na` tibble.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\none_cols <- df_na %>% \n  filter(value == 1) %>% \n  pull(columns)\none_cols\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"name_family_status\" \"name_housing_type\"  \"days_birth\"        \n[4] \"days_employed\"      \"flag_mobil\"         \"flag_work_phone\"   \n[7] \"flag_phone\"         \"flag_email\"         \"cnt_fam_members\"   \n```\n\n\n:::\n:::\n\n\n\nThen, to check multiple OR condition, we can use `if_any`. In this case, we are checking if multiple columns are NA, with the previous filter on only one NA in each column.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(reticulate)\n\ndf %>% \n  filter(\n    if_any(all_of(one_cols), ~ . %>% is.na())\n  ) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"mnbqydxgwi\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#mnbqydxgwi table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#mnbqydxgwi thead, #mnbqydxgwi tbody, #mnbqydxgwi tfoot, #mnbqydxgwi tr, #mnbqydxgwi td, #mnbqydxgwi th {\n  border-style: none;\n}\n\n#mnbqydxgwi p {\n  margin: 0;\n  padding: 0;\n}\n\n#mnbqydxgwi .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#mnbqydxgwi .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#mnbqydxgwi .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#mnbqydxgwi .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#mnbqydxgwi .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#mnbqydxgwi .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#mnbqydxgwi .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#mnbqydxgwi .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#mnbqydxgwi .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#mnbqydxgwi .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#mnbqydxgwi .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mnbqydxgwi .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#mnbqydxgwi .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#mnbqydxgwi .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#mnbqydxgwi .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mnbqydxgwi .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#mnbqydxgwi .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#mnbqydxgwi .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#mnbqydxgwi .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mnbqydxgwi .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#mnbqydxgwi .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mnbqydxgwi .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#mnbqydxgwi .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mnbqydxgwi .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mnbqydxgwi .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mnbqydxgwi .gt_left {\n  text-align: left;\n}\n\n#mnbqydxgwi .gt_center {\n  text-align: center;\n}\n\n#mnbqydxgwi .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#mnbqydxgwi .gt_font_normal {\n  font-weight: normal;\n}\n\n#mnbqydxgwi .gt_font_bold {\n  font-weight: bold;\n}\n\n#mnbqydxgwi .gt_font_italic {\n  font-style: italic;\n}\n\n#mnbqydxgwi .gt_super {\n  font-size: 65%;\n}\n\n#mnbqydxgwi .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#mnbqydxgwi .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#mnbqydxgwi .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#mnbqydxgwi .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#mnbqydxgwi .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#mnbqydxgwi .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#mnbqydxgwi .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#mnbqydxgwi .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#mnbqydxgwi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"id\">id</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"code_gender\">code_gender</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_own_car\">flag_own_car</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_own_realty\">flag_own_realty</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"cnt_children\">cnt_children</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"amt_income_total\">amt_income_total</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_income_type\">name_income_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_education_type\">name_education_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_family_status\">name_family_status</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_housing_type\">name_housing_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"days_birth\">days_birth</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"days_employed\">days_employed</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_mobil\">flag_mobil</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_work_phone\">flag_work_phone</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_phone\">flag_phone</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_email\">flag_email</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"occupation_type\">occupation_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"cnt_fam_members\">cnt_fam_members</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"target\">target</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">6392180</td>\n<td headers=\"code_gender\" class=\"gt_row gt_left\">F</td>\n<td headers=\"flag_own_car\" class=\"gt_row gt_left\">N</td>\n<td headers=\"flag_own_realty\" class=\"gt_row gt_left\">N</td>\n<td headers=\"cnt_children\" class=\"gt_row gt_right\">0</td>\n<td headers=\"amt_income_total\" class=\"gt_row gt_right\">67500</td>\n<td headers=\"name_income_type\" class=\"gt_row gt_left\">Working</td>\n<td headers=\"name_education_type\" class=\"gt_row gt_left\">Secondary / se</td>\n<td headers=\"name_family_status\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"name_housing_type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"days_birth\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"days_employed\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"flag_mobil\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"flag_work_phone\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"flag_phone\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"flag_email\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"occupation_type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"cnt_fam_members\" class=\"gt_row gt_right\">NaN</td>\n<td headers=\"target\" class=\"gt_row gt_right\">0</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\npy$id_to_remove <- df %>% \n  filter(\n    if_any(one_cols, ~ . %>% is.na())\n  ) %>% \n  pull(id)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using an external vector in selections was deprecated in tidyselect 1.1.0.\nℹ Please use `all_of()` or `any_of()` instead.\n  # Was:\n  data %>% select(one_cols)\n\n  # Now:\n  data %>% select(all_of(one_cols))\n\nSee <https://tidyselect.r-lib.org/reference/faq-external-vector.html>.\n```\n\n\n:::\n:::\n\n\n\n#### Interesting features\n\nLets also look at some interesting variable: click on the different tabs to see the frequency table for each of them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# features to check\ncols <- c(\n  \"cnt_children\",\n  \"name_education_type\",\n  \"name_family_status\",\n  \"name_housing_type\",\n  \"cnt_fam_members\",\n  \"flag_own_car\",\n  \"code_gender\"\n  )\n# \ncount_results <- map(cols, ~ df %>% filter(!is.na(occupation_type)) %>% count(.data[[.x]]))\nnames(count_results) <- cols\n```\n:::\n\n\n\n::: panel-tabset\n## Count children\n\n\n\n::: {#tbl-cnt_children .cell tbl-cap='Count of Number of Children'}\n\n```{.r .cell-code}\ncount_results$cnt_children %>% \n  arrange(desc(n)) %>% \n  gt() %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    cnt_children = \"# Children\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count of Number of Children\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"thaazojncg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#thaazojncg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#thaazojncg thead, #thaazojncg tbody, #thaazojncg tfoot, #thaazojncg tr, #thaazojncg td, #thaazojncg th {\n  border-style: none;\n}\n\n#thaazojncg p {\n  margin: 0;\n  padding: 0;\n}\n\n#thaazojncg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#thaazojncg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#thaazojncg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#thaazojncg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#thaazojncg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#thaazojncg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#thaazojncg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#thaazojncg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#thaazojncg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#thaazojncg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#thaazojncg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#thaazojncg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#thaazojncg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#thaazojncg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#thaazojncg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#thaazojncg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#thaazojncg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#thaazojncg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#thaazojncg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#thaazojncg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#thaazojncg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#thaazojncg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#thaazojncg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#thaazojncg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#thaazojncg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#thaazojncg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#thaazojncg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#thaazojncg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#thaazojncg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#thaazojncg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#thaazojncg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#thaazojncg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#thaazojncg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#thaazojncg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#thaazojncg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#thaazojncg .gt_left {\n  text-align: left;\n}\n\n#thaazojncg .gt_center {\n  text-align: center;\n}\n\n#thaazojncg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#thaazojncg .gt_font_normal {\n  font-weight: normal;\n}\n\n#thaazojncg .gt_font_bold {\n  font-weight: bold;\n}\n\n#thaazojncg .gt_font_italic {\n  font-style: italic;\n}\n\n#thaazojncg .gt_super {\n  font-size: 65%;\n}\n\n#thaazojncg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#thaazojncg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#thaazojncg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#thaazojncg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#thaazojncg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#thaazojncg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#thaazojncg .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#thaazojncg .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#thaazojncg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count of Number of Children</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"cnt_children\"># Children</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">0</td>\n<td headers=\"n\" class=\"gt_row gt_center\">148,909</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">1</td>\n<td headers=\"n\" class=\"gt_row gt_center\">56,238</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">2</td>\n<td headers=\"n\" class=\"gt_row gt_center\">26,196</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">3</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3,319</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">4</td>\n<td headers=\"n\" class=\"gt_row gt_center\">300</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">5</td>\n<td headers=\"n\" class=\"gt_row gt_center\">109</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">9</td>\n<td headers=\"n\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">12</td>\n<td headers=\"n\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">14</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">7</td>\n<td headers=\"n\" class=\"gt_row gt_center\">2</td></tr>\n    <tr><td headers=\"cnt_children\" class=\"gt_row gt_center\">19</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Education type\n\n\n\n::: {#tbl-name_education_type .cell tbl-cap='Count by Education Type'}\n\n```{.r .cell-code}\ncount_results$name_education_type %>% \n  arrange(desc(n)) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    name_education_type = \"Education Type\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by Education Type\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ohahervgfj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ohahervgfj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ohahervgfj thead, #ohahervgfj tbody, #ohahervgfj tfoot, #ohahervgfj tr, #ohahervgfj td, #ohahervgfj th {\n  border-style: none;\n}\n\n#ohahervgfj p {\n  margin: 0;\n  padding: 0;\n}\n\n#ohahervgfj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ohahervgfj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ohahervgfj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ohahervgfj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ohahervgfj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ohahervgfj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ohahervgfj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ohahervgfj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ohahervgfj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ohahervgfj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ohahervgfj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ohahervgfj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ohahervgfj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ohahervgfj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ohahervgfj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ohahervgfj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ohahervgfj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ohahervgfj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ohahervgfj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ohahervgfj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ohahervgfj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ohahervgfj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ohahervgfj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ohahervgfj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ohahervgfj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ohahervgfj .gt_left {\n  text-align: left;\n}\n\n#ohahervgfj .gt_center {\n  text-align: center;\n}\n\n#ohahervgfj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ohahervgfj .gt_font_normal {\n  font-weight: normal;\n}\n\n#ohahervgfj .gt_font_bold {\n  font-weight: bold;\n}\n\n#ohahervgfj .gt_font_italic {\n  font-style: italic;\n}\n\n#ohahervgfj .gt_super {\n  font-size: 65%;\n}\n\n#ohahervgfj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ohahervgfj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ohahervgfj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ohahervgfj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ohahervgfj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ohahervgfj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ohahervgfj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ohahervgfj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ohahervgfj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by Education Type</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_education_type\">Education Type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"name_education_type\" class=\"gt_row gt_center\">Secondary / secondary special</td>\n<td headers=\"n\" class=\"gt_row gt_center\">157,822</td></tr>\n    <tr><td headers=\"name_education_type\" class=\"gt_row gt_center\">Higher education</td>\n<td headers=\"n\" class=\"gt_row gt_center\">66,693</td></tr>\n    <tr><td headers=\"name_education_type\" class=\"gt_row gt_center\">Incomplete higher</td>\n<td headers=\"n\" class=\"gt_row gt_center\">8,799</td></tr>\n    <tr><td headers=\"name_education_type\" class=\"gt_row gt_center\">Lower secondary</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1,609</td></tr>\n    <tr><td headers=\"name_education_type\" class=\"gt_row gt_center\">Academic degree</td>\n<td headers=\"n\" class=\"gt_row gt_center\">162</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Family status\n\n\n\n::: {#tbl-name_family_status .cell tbl-cap='Count by Family Status'}\n\n```{.r .cell-code}\ncount_results$name_family_status %>% \n  arrange(desc(n)) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    name_family_status = \"Family Status\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by Family Status\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"wibagsifhw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#wibagsifhw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#wibagsifhw thead, #wibagsifhw tbody, #wibagsifhw tfoot, #wibagsifhw tr, #wibagsifhw td, #wibagsifhw th {\n  border-style: none;\n}\n\n#wibagsifhw p {\n  margin: 0;\n  padding: 0;\n}\n\n#wibagsifhw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#wibagsifhw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wibagsifhw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wibagsifhw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wibagsifhw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wibagsifhw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wibagsifhw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wibagsifhw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wibagsifhw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#wibagsifhw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#wibagsifhw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wibagsifhw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wibagsifhw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wibagsifhw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wibagsifhw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wibagsifhw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wibagsifhw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wibagsifhw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#wibagsifhw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wibagsifhw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wibagsifhw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wibagsifhw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wibagsifhw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wibagsifhw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wibagsifhw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wibagsifhw .gt_left {\n  text-align: left;\n}\n\n#wibagsifhw .gt_center {\n  text-align: center;\n}\n\n#wibagsifhw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wibagsifhw .gt_font_normal {\n  font-weight: normal;\n}\n\n#wibagsifhw .gt_font_bold {\n  font-weight: bold;\n}\n\n#wibagsifhw .gt_font_italic {\n  font-style: italic;\n}\n\n#wibagsifhw .gt_super {\n  font-size: 65%;\n}\n\n#wibagsifhw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#wibagsifhw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wibagsifhw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#wibagsifhw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#wibagsifhw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#wibagsifhw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#wibagsifhw .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#wibagsifhw .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#wibagsifhw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by Family Status</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_family_status\">Family Status</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"name_family_status\" class=\"gt_row gt_center\">Married</td>\n<td headers=\"n\" class=\"gt_row gt_center\">164,310</td></tr>\n    <tr><td headers=\"name_family_status\" class=\"gt_row gt_center\">Single / not married</td>\n<td headers=\"n\" class=\"gt_row gt_center\">30,551</td></tr>\n    <tr><td headers=\"name_family_status\" class=\"gt_row gt_center\">Civil marriage</td>\n<td headers=\"n\" class=\"gt_row gt_center\">20,968</td></tr>\n    <tr><td headers=\"name_family_status\" class=\"gt_row gt_center\">Separated</td>\n<td headers=\"n\" class=\"gt_row gt_center\">14,108</td></tr>\n    <tr><td headers=\"name_family_status\" class=\"gt_row gt_center\">Widow</td>\n<td headers=\"n\" class=\"gt_row gt_center\">5,148</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Housing type\n\n\n\n::: {#tbl-name_housing_type .cell tbl-cap='Count by House Type'}\n\n```{.r .cell-code}\ncount_results$name_housing_type %>% \n  arrange(desc(n)) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    name_housing_type = \"House Type\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by House Type\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zrhnbzkycn\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zrhnbzkycn table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zrhnbzkycn thead, #zrhnbzkycn tbody, #zrhnbzkycn tfoot, #zrhnbzkycn tr, #zrhnbzkycn td, #zrhnbzkycn th {\n  border-style: none;\n}\n\n#zrhnbzkycn p {\n  margin: 0;\n  padding: 0;\n}\n\n#zrhnbzkycn .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zrhnbzkycn .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zrhnbzkycn .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zrhnbzkycn .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zrhnbzkycn .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zrhnbzkycn .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zrhnbzkycn .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zrhnbzkycn .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zrhnbzkycn .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zrhnbzkycn .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zrhnbzkycn .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zrhnbzkycn .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zrhnbzkycn .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zrhnbzkycn .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zrhnbzkycn .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zrhnbzkycn .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zrhnbzkycn .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zrhnbzkycn .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zrhnbzkycn .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zrhnbzkycn .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zrhnbzkycn .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zrhnbzkycn .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zrhnbzkycn .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zrhnbzkycn .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zrhnbzkycn .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zrhnbzkycn .gt_left {\n  text-align: left;\n}\n\n#zrhnbzkycn .gt_center {\n  text-align: center;\n}\n\n#zrhnbzkycn .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zrhnbzkycn .gt_font_normal {\n  font-weight: normal;\n}\n\n#zrhnbzkycn .gt_font_bold {\n  font-weight: bold;\n}\n\n#zrhnbzkycn .gt_font_italic {\n  font-style: italic;\n}\n\n#zrhnbzkycn .gt_super {\n  font-size: 65%;\n}\n\n#zrhnbzkycn .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zrhnbzkycn .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zrhnbzkycn .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zrhnbzkycn .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zrhnbzkycn .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zrhnbzkycn .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zrhnbzkycn .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zrhnbzkycn .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zrhnbzkycn div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by House Type</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name_housing_type\">House Type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">House / apartment</td>\n<td headers=\"n\" class=\"gt_row gt_center\">208,980</td></tr>\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">With parents</td>\n<td headers=\"n\" class=\"gt_row gt_center\">11,938</td></tr>\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">Municipal apartment</td>\n<td headers=\"n\" class=\"gt_row gt_center\">7,411</td></tr>\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">Rented apartment</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3,549</td></tr>\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">Office apartment</td>\n<td headers=\"n\" class=\"gt_row gt_center\">2,270</td></tr>\n    <tr><td headers=\"name_housing_type\" class=\"gt_row gt_center\">Co-op apartment</td>\n<td headers=\"n\" class=\"gt_row gt_center\">937</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Count family members\n\n\n\n::: {#tbl-cnt_fam_members .cell tbl-cap='Count by Number of Family Members'}\n\n```{.r .cell-code}\ncount_results$cnt_fam_members %>% \n  arrange(desc(n)) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    cnt_fam_members = \"Number of Family Members\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by Number of Family Members\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"itofowjhwg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#itofowjhwg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#itofowjhwg thead, #itofowjhwg tbody, #itofowjhwg tfoot, #itofowjhwg tr, #itofowjhwg td, #itofowjhwg th {\n  border-style: none;\n}\n\n#itofowjhwg p {\n  margin: 0;\n  padding: 0;\n}\n\n#itofowjhwg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#itofowjhwg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#itofowjhwg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#itofowjhwg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#itofowjhwg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#itofowjhwg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#itofowjhwg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#itofowjhwg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#itofowjhwg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#itofowjhwg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#itofowjhwg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#itofowjhwg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#itofowjhwg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#itofowjhwg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#itofowjhwg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#itofowjhwg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#itofowjhwg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#itofowjhwg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#itofowjhwg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#itofowjhwg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#itofowjhwg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#itofowjhwg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#itofowjhwg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#itofowjhwg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#itofowjhwg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#itofowjhwg .gt_left {\n  text-align: left;\n}\n\n#itofowjhwg .gt_center {\n  text-align: center;\n}\n\n#itofowjhwg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#itofowjhwg .gt_font_normal {\n  font-weight: normal;\n}\n\n#itofowjhwg .gt_font_bold {\n  font-weight: bold;\n}\n\n#itofowjhwg .gt_font_italic {\n  font-style: italic;\n}\n\n#itofowjhwg .gt_super {\n  font-size: 65%;\n}\n\n#itofowjhwg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#itofowjhwg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#itofowjhwg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#itofowjhwg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#itofowjhwg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#itofowjhwg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#itofowjhwg .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#itofowjhwg .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#itofowjhwg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by Number of Family Members</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"cnt_fam_members\">Number of Family Members</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">2</td>\n<td headers=\"n\" class=\"gt_row gt_center\">118,852</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">3</td>\n<td headers=\"n\" class=\"gt_row gt_center\">49,232</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">1</td>\n<td headers=\"n\" class=\"gt_row gt_center\">38,902</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">4</td>\n<td headers=\"n\" class=\"gt_row gt_center\">24,556</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">5</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3,138</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">6</td>\n<td headers=\"n\" class=\"gt_row gt_center\">282</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">7</td>\n<td headers=\"n\" class=\"gt_row gt_center\">109</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">11</td>\n<td headers=\"n\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">14</td>\n<td headers=\"n\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">15</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">9</td>\n<td headers=\"n\" class=\"gt_row gt_center\">2</td></tr>\n    <tr><td headers=\"cnt_fam_members\" class=\"gt_row gt_center\">20</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Own car\n\n\n\n::: {#tbl-flag_own_car .cell tbl-cap='Count by Own a Car'}\n\n```{.r .cell-code}\ncount_results$flag_own_car %>% \n  arrange(desc(n)) %>% \n  gt()  %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    flag_own_car = \"Own Car\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by Own a Car\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"rxrwrciuqo\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rxrwrciuqo table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rxrwrciuqo thead, #rxrwrciuqo tbody, #rxrwrciuqo tfoot, #rxrwrciuqo tr, #rxrwrciuqo td, #rxrwrciuqo th {\n  border-style: none;\n}\n\n#rxrwrciuqo p {\n  margin: 0;\n  padding: 0;\n}\n\n#rxrwrciuqo .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rxrwrciuqo .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rxrwrciuqo .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rxrwrciuqo .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rxrwrciuqo .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rxrwrciuqo .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rxrwrciuqo .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rxrwrciuqo .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rxrwrciuqo .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rxrwrciuqo .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rxrwrciuqo .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rxrwrciuqo .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rxrwrciuqo .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rxrwrciuqo .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rxrwrciuqo .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rxrwrciuqo .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rxrwrciuqo .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rxrwrciuqo .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rxrwrciuqo .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rxrwrciuqo .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rxrwrciuqo .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rxrwrciuqo .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rxrwrciuqo .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rxrwrciuqo .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rxrwrciuqo .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rxrwrciuqo .gt_left {\n  text-align: left;\n}\n\n#rxrwrciuqo .gt_center {\n  text-align: center;\n}\n\n#rxrwrciuqo .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rxrwrciuqo .gt_font_normal {\n  font-weight: normal;\n}\n\n#rxrwrciuqo .gt_font_bold {\n  font-weight: bold;\n}\n\n#rxrwrciuqo .gt_font_italic {\n  font-style: italic;\n}\n\n#rxrwrciuqo .gt_super {\n  font-size: 65%;\n}\n\n#rxrwrciuqo .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rxrwrciuqo .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rxrwrciuqo .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rxrwrciuqo .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rxrwrciuqo .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rxrwrciuqo .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rxrwrciuqo .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#rxrwrciuqo .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#rxrwrciuqo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by Own a Car</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flag_own_car\">Own Car</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"flag_own_car\" class=\"gt_row gt_center\">N</td>\n<td headers=\"n\" class=\"gt_row gt_center\">138,203</td></tr>\n    <tr><td headers=\"flag_own_car\" class=\"gt_row gt_center\">Y</td>\n<td headers=\"n\" class=\"gt_row gt_center\">96,882</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n## Gender\n\n\n\n::: {#tbl-code_gender .cell tbl-cap='Count by Gender'}\n\n```{.r .cell-code}\ncount_results$code_gender %>% \n  arrange(desc(n)) %>% \n  gt() %>% \n  tab_options(\n    table.width = pct(100)\n    ) %>% \n  cols_align(align = \"center\") %>% \n  cols_label(\n    code_gender = \"Gender\",\n    n = \"Count\"\n  ) %>% \n  tab_header(\n    title = \"Count by Gender\",\n  ) %>% \n  fmt_number(\n    columns = c(\"n\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    #drop_trailing_dec_mark = FALSE\n  ) \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"swsinzpgrl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#swsinzpgrl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#swsinzpgrl thead, #swsinzpgrl tbody, #swsinzpgrl tfoot, #swsinzpgrl tr, #swsinzpgrl td, #swsinzpgrl th {\n  border-style: none;\n}\n\n#swsinzpgrl p {\n  margin: 0;\n  padding: 0;\n}\n\n#swsinzpgrl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#swsinzpgrl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#swsinzpgrl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#swsinzpgrl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#swsinzpgrl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#swsinzpgrl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#swsinzpgrl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#swsinzpgrl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#swsinzpgrl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#swsinzpgrl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#swsinzpgrl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#swsinzpgrl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#swsinzpgrl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#swsinzpgrl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#swsinzpgrl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#swsinzpgrl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#swsinzpgrl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#swsinzpgrl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#swsinzpgrl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#swsinzpgrl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#swsinzpgrl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#swsinzpgrl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#swsinzpgrl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#swsinzpgrl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#swsinzpgrl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#swsinzpgrl .gt_left {\n  text-align: left;\n}\n\n#swsinzpgrl .gt_center {\n  text-align: center;\n}\n\n#swsinzpgrl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#swsinzpgrl .gt_font_normal {\n  font-weight: normal;\n}\n\n#swsinzpgrl .gt_font_bold {\n  font-weight: bold;\n}\n\n#swsinzpgrl .gt_font_italic {\n  font-style: italic;\n}\n\n#swsinzpgrl .gt_super {\n  font-size: 65%;\n}\n\n#swsinzpgrl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#swsinzpgrl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#swsinzpgrl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#swsinzpgrl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#swsinzpgrl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#swsinzpgrl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#swsinzpgrl .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#swsinzpgrl .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#swsinzpgrl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Count by Gender</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"code_gender\">Gender</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"code_gender\" class=\"gt_row gt_center\">F</td>\n<td headers=\"n\" class=\"gt_row gt_center\">147,505</td></tr>\n    <tr><td headers=\"code_gender\" class=\"gt_row gt_center\">M</td>\n<td headers=\"n\" class=\"gt_row gt_center\">87,580</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n:::\n\n# Data preparation\n\nFrom the EDA, we know we can drop\n\n-   NA occupation_type.\n-   the id 6.39218\\times 10^{6}.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndf = df[df.id != id_to_remove]\ndf = df[~df.occupation_type.isna()]\n```\n:::\n\n\n\nIt could be useful to have the birthday and employed date not as integer, but proper date. We will check after if they are really useful.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndf[\"birthday\"] = df.days_birth.map(lambda x : (date.today() + relativedelta(days=x)).strftime(\"%Y-%m-%d\"))\ndf[\"employed\"] = df[\"days_employed\"].apply(lambda x: (date.today() + relativedelta(days=x)).strftime(\"%Y-%m-%d\") if x < 0 else \"0\")\n```\n:::\n\n\n\n# Split\n\nTo take into consideration the unbalance and have it also in our split, we can use the `stratify` method.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nx = df[config.features]\ny = df.target\n\nxtrain, xtest, ytrain, ytest = train_test_split(\n  x, \n  y, \n  test_size = .2,\n  stratify = y\n)\n```\n:::\n\n\n\n# Models\n\n## DecisionTreeClassifier\n\nTo address the model **explainability**, we can choose a CART model. This selection has 2 interesting point for our task:\n\n1.  **Explainability**, as already mentioned. This will help us explain the reason of rejection.\n2.  **Feature selection.** At this [link](https://www.researchgate.net/publication/369355042_A_Comprehensive_Review_of_Feature_Selection_and_Feature_Selection_Stability_in_Machine_Learning) you can find a paper which shows how **embedded method** as the tree models can have the same performance of traditional feature selection method.\n\n### GridSearchCV\n\nEven if the result of the model are relatively easy to understand, the **hyperparameter tuning** has far too many possibility. This is where `GridSearchCV()` comes handy.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nparam_grid = {\n  \"dtc__criterion\" : [\"gini\", \"entropy\", \"log_loss\"],\n  \"dtc__splitter\" : [\"best\", \"random\"],\n  \"dtc__max_depth\" : [2, 5, 10],\n  \"dtc__max_features\" : [len(config.features)]\n}\n\nscoring = {\n    \"accuracy\": \"accuracy\",\n    \"f1\": \"f1\",\n    \"roc_auc\": \"roc_auc\"\n}\n```\n:::\n\n\n\n### Pipeline\n\nOne of the many nice `sklearn` features is the [`Pipeline()`](https://scikit-learn.org/1.5/modules/generated/sklearn.pipeline.Pipeline.html). It has lots of important benefits:\n\n-   **Code redundancy and reproducibility** : it is like a recipe you can tune and run without worrying about to put togheter each step in the correct order.\n-   **Avoid data leakege**: the preprocessing steps applies only to the training dataset.\n-   **Hyperparameter tuning**: the `Pipeline()` integrates with `GridSearchCV()` and `RandomizedSearchCV()`.\n-   **Modularity**: it enables tuning the various steps, removing or adding new one.\n\nFirst, initialize the various preprocessor and the CART model.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nohe = OneHotEncoder()\nohe_bi = OneHotEncoder(drop=\"if_binary\")\nss = StandardScaler()\nmms = MinMaxScaler()\ndtc = DecisionTreeClassifier(class_weight=\"balanced\")\n```\n:::\n\n\n\nUsing the `ColumnTransformer()`, we can apply the different preprocessing to the specific columns. The preprocessing is divided between:\n\n-   Encoding the **binary labels** to 0-1 using `OneHotEncoding(drop=\"if_binary)\"`.\n-   Encoding the remaining labels using `OneHotEncoding()`. I choose this over other categorical variables encoding because it avoid imputing a hierarchy.\n-   **Standardize** the numerical variables using `StandardScaler()`. I also have instantiated the `MinMaxScaler()`, but I am not using it.\n\nThe classifier is a `DecisionTreeClassifier()`, which the `GridSearchCV()` will tune.\n\nAll of these steps are putted togheter with the `Pipeline()`.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\npreprocessor = ColumnTransformer(\n  transformers=[\n    (\"binary_encoder\", ohe_bi, config.col_bi),\n    (\"categorical_encoder\", ohe, config.col_ohe),\n    (\"scaler\", ss, config.col_ss)\n    ],\n    remainder='passthrough'\n    )\n\npipe_dtc = Pipeline(\n  steps=[\n    (\"preprocessor\", preprocessor),\n    (\"dtc\", dtc)\n    ]\n    )\n```\n:::\n\n\n\n::: callout-important\nFor the binary labels I had to use the `OneHotEncoding(drop=\"if_binary\")`, otherwise other preprocessor would not work with the `ColumnTransformer()`.\n:::\n\n### Fit\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\ngrid_search_dtc = GridSearchCV(\n    estimator=pipe_dtc,\n    param_grid=param_grid,\n    cv=7,\n    scoring=scoring,\n    refit=\"accuracy\",  # This will refit the model using the accuracy metric\n    n_jobs=-1 # use all the available CPU\n    )\n\ngrid_search_dtc.fit(xtrain, ytrain)\n# save the model as pkl file\nwith open(config.path + \"grid_search_dtc.pkl\", \"wb\") as file:\n  pickle.dump(grid_search_dtc, file)\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\nwith open(config.path + \"grid_search_dtc.pkl\", \"rb\") as file:\n    dtc_model = pickle.load(file)\n\n\ncv_results = pd.DataFrame(dtc_model.cv_results_)\nmodel = dtc_model.best_estimator_\n```\n:::\n\n::: {#tbl-cv_results .cell tbl-cap='Cross Validation Results'}\n\n```{.r .cell-code}\npy$cv_results %>% \n  arrange(across(contains(\"rank\"))) %>% \n  select(params, mean_test_accuracy, rank_test_accuracy, mean_test_f1, rank_test_f1, mean_test_roc_auc, rank_test_roc_auc) %>% \n  gt() %>%\n  tab_header(\n    title = \"Cross Validation Results\",\n    subtitle = \"Main metrics\"\n  ) %>% \n  fmt_number(\n   columns = c(\"mean_test_accuracy\", \"mean_test_f1\", \"mean_test_roc_auc\"),\n   decimals = 3,\n   drop_trailing_zeros = TRUE,\n   drop_trailing_dec_mark = FALSE\n  ) %>% \n  cols_align(\n    align = \"center\"\n  ) %>% \n  cols_label(\n    params = \"criterion - max_depth - max_features - splitter\",\n    mean_test_accuracy = \"Mean Test Accuracy\",\n    rank_test_accuracy = \"Rank Test Accuracy\",\n    mean_test_f1 = \"Mean Test F1\",\n    rank_test_f1 = \"Rank Test F1\",\n    mean_test_roc_auc = \"Mean Test ROC AUC\",\n    rank_test_roc_auc = \"Rank Test ROC AUC\",\n  ) %>% \n  tab_options(\n    table.width = pct(100)\n    )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kwahbgktoe\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kwahbgktoe table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kwahbgktoe thead, #kwahbgktoe tbody, #kwahbgktoe tfoot, #kwahbgktoe tr, #kwahbgktoe td, #kwahbgktoe th {\n  border-style: none;\n}\n\n#kwahbgktoe p {\n  margin: 0;\n  padding: 0;\n}\n\n#kwahbgktoe .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kwahbgktoe .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kwahbgktoe .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kwahbgktoe .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kwahbgktoe .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kwahbgktoe .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kwahbgktoe .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kwahbgktoe .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kwahbgktoe .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kwahbgktoe .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kwahbgktoe .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kwahbgktoe .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kwahbgktoe .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kwahbgktoe .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kwahbgktoe .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kwahbgktoe .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kwahbgktoe .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kwahbgktoe .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kwahbgktoe .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kwahbgktoe .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kwahbgktoe .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kwahbgktoe .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kwahbgktoe .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kwahbgktoe .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kwahbgktoe .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kwahbgktoe .gt_left {\n  text-align: left;\n}\n\n#kwahbgktoe .gt_center {\n  text-align: center;\n}\n\n#kwahbgktoe .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kwahbgktoe .gt_font_normal {\n  font-weight: normal;\n}\n\n#kwahbgktoe .gt_font_bold {\n  font-weight: bold;\n}\n\n#kwahbgktoe .gt_font_italic {\n  font-style: italic;\n}\n\n#kwahbgktoe .gt_super {\n  font-size: 65%;\n}\n\n#kwahbgktoe .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kwahbgktoe .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kwahbgktoe .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kwahbgktoe .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kwahbgktoe .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kwahbgktoe .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kwahbgktoe .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kwahbgktoe .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kwahbgktoe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"7\" class=\"gt_heading gt_title gt_font_normal\" style>Cross Validation Results</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"7\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Main metrics</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"params\">criterion - max_depth - max_features - splitter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mean_test_accuracy\">Mean Test Accuracy</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rank_test_accuracy\">Rank Test Accuracy</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mean_test_f1\">Mean Test F1</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rank_test_f1\">Rank Test F1</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mean_test_roc_auc\">Mean Test ROC AUC</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rank_test_roc_auc\">Rank Test ROC AUC</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 2, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.727</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">1</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.2</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">18</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.56</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">17</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 10, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.707</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">2</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.403</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">1</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.863</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">2</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 10, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.704</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">3</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.4</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">2</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.863</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">1</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 10, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.701</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">4</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.394</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">3</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.853</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">3</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 2, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.677</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">5</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">8</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.705</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">11</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 5, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.667</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">6</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.368</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">4</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.82</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 5, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.656</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">7</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.365</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">5</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.819</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">5</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 5, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.651</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">8</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.348</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">6</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.797</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">6</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 10, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.605</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">9</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.296</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">9</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.741</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">7</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 10, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.602</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">10</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.274</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">12</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.706</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">10</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 2, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.591</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">11</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.31</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">7</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.715</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">9</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 10, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.583</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">12</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.277</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">11</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.722</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">8</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 5, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.56</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">13</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.231</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">15</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.622</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">15</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 2, 15, best</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.543</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">14</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.285</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">10</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.677</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">12</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 5, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.541</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">15</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.234</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">14</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.633</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">14</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">log_loss, 5, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.515</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">16</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.246</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">13</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.65</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">13</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">gini, 2, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.513</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">17</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.207</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">16</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.567</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">16</td></tr>\n    <tr><td headers=\"params\" class=\"gt_row gt_center\">entropy, 2, 15, random</td>\n<td headers=\"mean_test_accuracy\" class=\"gt_row gt_center\">0.341</td>\n<td headers=\"rank_test_accuracy\" class=\"gt_row gt_center\">18</td>\n<td headers=\"mean_test_f1\" class=\"gt_row gt_center\">0.203</td>\n<td headers=\"rank_test_f1\" class=\"gt_row gt_center\">17</td>\n<td headers=\"mean_test_roc_auc\" class=\"gt_row gt_center\">0.549</td>\n<td headers=\"rank_test_roc_auc\" class=\"gt_row gt_center\">18</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nThe grid search returns a CART with a best score of best_score with the following parameters:\n\n-   criterion:\n-   max_depth:\n-   splitter:\n\nNow, we can save and load the model. This is useful to avoid to run the grid_search.\n\n### Predict\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nypred = model.predict(xtest)\n```\n:::\n\n\n\n### Classification Report\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\ncr = classification_report(\n  ytest,\n  ypred,\n  # target_names=config.labels,\n  digits=4,\n  output_dict=True\n  )\ndf_cr = pd.DataFrame.from_dict(cr).reset_index()\n```\n:::\n\n::: {#tbl-classification-report .cell tbl-cap='Classification report'}\n\n```{.r .cell-code}\nlibrary(reticulate)\ndf_cr <- py$df_cr %>% dplyr::rename(names = index)\ncols <- df_cr %>% colnames()\ndf_cr %>% \n  pivot_longer(\n    cols = -names,\n    names_to = \"metrics\",\n    values_to = \"values\"\n  ) %>% \n  pivot_wider(\n    names_from = names,\n    values_from = values\n  ) %>% \n  gt() %>%\n  tab_header(\n    title = \"Confusion Matrix\",\n    subtitle = \"Threshold optimization favoring recall\"\n  ) %>% \n  fmt_number(\n    columns = c(\"precision\", \"recall\", \"f1-score\", \"support\"),\n    decimals = 2,\n    drop_trailing_zeros = TRUE,\n    drop_trailing_dec_mark = FALSE\n  ) %>% \n  cols_align(\n    align = \"center\",\n    columns = c(\"precision\", \"recall\", \"f1-score\", \"support\")\n  ) %>% \n  cols_align(\n    align = \"left\",\n    columns = metrics\n  ) %>% \n  cols_label(\n    metrics = \"Metrics\",\n    precision = \"Precision\",\n    recall = \"Recall\",\n    `f1-score` = \"F1-Score\",\n    support = \"Support\"\n  ) %>% \n  tab_options(\n    table.width = pct(100)\n    )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ukxazcfame\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ukxazcfame table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ukxazcfame thead, #ukxazcfame tbody, #ukxazcfame tfoot, #ukxazcfame tr, #ukxazcfame td, #ukxazcfame th {\n  border-style: none;\n}\n\n#ukxazcfame p {\n  margin: 0;\n  padding: 0;\n}\n\n#ukxazcfame .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 100%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ukxazcfame .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ukxazcfame .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ukxazcfame .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ukxazcfame .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ukxazcfame .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ukxazcfame .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ukxazcfame .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ukxazcfame .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ukxazcfame .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ukxazcfame .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ukxazcfame .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ukxazcfame .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ukxazcfame .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ukxazcfame .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ukxazcfame .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ukxazcfame .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ukxazcfame .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ukxazcfame .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ukxazcfame .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ukxazcfame .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ukxazcfame .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ukxazcfame .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ukxazcfame .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ukxazcfame .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ukxazcfame .gt_left {\n  text-align: left;\n}\n\n#ukxazcfame .gt_center {\n  text-align: center;\n}\n\n#ukxazcfame .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ukxazcfame .gt_font_normal {\n  font-weight: normal;\n}\n\n#ukxazcfame .gt_font_bold {\n  font-weight: bold;\n}\n\n#ukxazcfame .gt_font_italic {\n  font-style: italic;\n}\n\n#ukxazcfame .gt_super {\n  font-size: 65%;\n}\n\n#ukxazcfame .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ukxazcfame .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ukxazcfame .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ukxazcfame .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ukxazcfame .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ukxazcfame .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ukxazcfame .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ukxazcfame .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ukxazcfame div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal\" style>Confusion Matrix</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Threshold optimization favoring recall</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"metrics\">Metrics</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"precision\">Precision</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"recall\">Recall</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"f1-score\">F1-Score</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"support\">Support</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"metrics\" class=\"gt_row gt_left\">0</td>\n<td headers=\"precision\" class=\"gt_row gt_center\">0.94</td>\n<td headers=\"recall\" class=\"gt_row gt_center\">0.48</td>\n<td headers=\"f1-score\" class=\"gt_row gt_center\">0.63</td>\n<td headers=\"support\" class=\"gt_row gt_center\">41,986.</td></tr>\n    <tr><td headers=\"metrics\" class=\"gt_row gt_left\">1</td>\n<td headers=\"precision\" class=\"gt_row gt_center\">0.15</td>\n<td headers=\"recall\" class=\"gt_row gt_center\">0.76</td>\n<td headers=\"f1-score\" class=\"gt_row gt_center\">0.25</td>\n<td headers=\"support\" class=\"gt_row gt_center\">5,031.</td></tr>\n    <tr><td headers=\"metrics\" class=\"gt_row gt_left\">accuracy</td>\n<td headers=\"precision\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"recall\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"f1-score\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"support\" class=\"gt_row gt_center\">0.51</td></tr>\n    <tr><td headers=\"metrics\" class=\"gt_row gt_left\">macro avg</td>\n<td headers=\"precision\" class=\"gt_row gt_center\">0.55</td>\n<td headers=\"recall\" class=\"gt_row gt_center\">0.62</td>\n<td headers=\"f1-score\" class=\"gt_row gt_center\">0.44</td>\n<td headers=\"support\" class=\"gt_row gt_center\">47,017.</td></tr>\n    <tr><td headers=\"metrics\" class=\"gt_row gt_left\">weighted avg</td>\n<td headers=\"precision\" class=\"gt_row gt_center\">0.86</td>\n<td headers=\"recall\" class=\"gt_row gt_center\">0.51</td>\n<td headers=\"f1-score\" class=\"gt_row gt_center\">0.59</td>\n<td headers=\"support\" class=\"gt_row gt_center\">47,017.</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\nCLASSIFICATION ANALYSIS\n\n## Random Forest Classifier\n\n## XGBoost Classifier\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}